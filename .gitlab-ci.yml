# Get container with "firebase-tools" pre-installed for deployment (CD) to Firebase Hosting.
image: node:latest

# Make sure to install all packages for each job.
before_script:
  - npm install

# Cache node_modules.
cache:
  paths:
    - node_modules/

# Define a deployment stage.
stages:
  - deploy

# Deployment settings.
deploy:
  stage: deploy
  environment:
    name: development # Deployment stage for development environment.
    # name: production # Deployment stage for development environment.
  script:
    - npm run build
    - npm run deploy
  only:
    - master # Corresponding only to the master branch.

# TODO: Add build & test stage.

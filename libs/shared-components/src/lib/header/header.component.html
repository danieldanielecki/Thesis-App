<!-- TODO: Improve in terms of Agastya. -->
<!-- TODO: Improve desktop version in terms of animations. -->
<!-- TODO: Improve in terms of accessibility. -->
<!--
  TODO: Click anywhere on mobile to close menu with giving darker background on whole screen.
-->
<!-- TODO: Write just 1 list and play with ngIf/flexbox. -->
<header>
  <mat-sidenav-container class="container">
    <mat-sidenav #sidenav fixedInViewport="true" role="navigation">
      <mat-toolbar>Menu</mat-toolbar>
      <mat-nav-list>
        <!-- Grouping element for list of menu items. -->
        <ng-container *ngFor="let menuItem of menuItems; let i = index">
          <a mat-list-item href="#" role="link">
            <mat-icon>{{ menuItem.icon }}</mat-icon>
            <span>&nbsp;{{ menuItem.name }}</span>
            <mat-menu #menuMobile="matMenu" *ngIf="i === 1">
              <!-- Lazy loading menu. -->
              <ng-template matMenuContent>
                <a
                  mat-menu-item
                  href="#"
                  role="link"
                  *ngFor="let serviceItem of servicesItems"
                >
                  <mat-icon>{{ serviceItem.icon }}</mat-icon>
                  <span>{{ serviceItem.name }}</span>
                </a>
              </ng-template>
            </mat-menu>
          </a>
        </ng-container>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content>
      <mat-toolbar color="primary">
        <!--
          Show the button by default, and will be hidden only on devices greater than mobile.
        -->
        <button
          type="button"
          aria-label="Toggle sidenav"
          mat-icon-button
          (click)="sidenav.toggle()"
          fxHide.gt-sm
        >
          <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
        </button>
        <!-- TODO: Put logo here. -->
        <span>Software Company</span>
        <!--
          The below element is hidden by default, and will be shown only on devices greater than mobile.
        -->
        <div fxFlex fxLayout fxLayoutAlign="end" fxHide fxShow.gt-sm>
          <mat-list fxLayout fxLayoutGap="10px" class="horizontal-items">
            <!-- Grouping element for list of menu items. -->
            <ng-container
              *ngFor="
                let menuItem of menuItems;
                let j = index;
                let lastItem = last
              "
            >
              <a mat-list-item href="#" role="link" *ngIf="!lastItem"
                >{{ menuItem.name }}
                <mat-icon
                  #menuTrigger="matMenuTrigger"
                  [matMenuTriggerFor]="menuDesktop"
                  (mouseover)="menuTrigger.openMenu()"
                  *ngIf="j === 1"
                  >arrow_drop_down
                </mat-icon>
                <mat-menu
                  #menuDesktop="matMenu"
                  [overlapTrigger]="false"
                  (mouseleave)="menuTrigger.closeMenu()"
                >
                  <!-- Lazy loading menu. -->
                  <ng-template matMenuContent>
                    <a
                      mat-menu-item
                      href="#"
                      role="link"
                      *ngFor="let serviceItem of servicesItems"
                      >{{ serviceItem.name }}</a
                    >
                  </ng-template>
                </mat-menu>
              </a>
            </ng-container>
          </mat-list>
        </div>
      </mat-toolbar>
    </mat-sidenav-content>
  </mat-sidenav-container>
</header>

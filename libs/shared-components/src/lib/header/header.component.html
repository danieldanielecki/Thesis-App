<!-- TODO: Improve in terms of Agastya. -->
<!--
  TODO: Click anywhere on mobile to close menu with giving darker background on whole screen.
-->
<header>
  <mat-sidenav-container class="container" aria-label="Sidenav" role="region">
    <!-- Desktop header main menu (toolbar). -->
    <mat-toolbar color="primary" aria-label="Toolbar" role="navigation">
      <!--
        Show the button by default, and will be hidden only on devices with min-width: 960px.
      -->
      <button
        mat-icon-button
        (click)="sidenav.toggle()"
        fxHide.gt-sm
        aria-label="Toggle sidenav"
        role="button"
        type="button"
      >
        <mat-icon aria-label="Sidenav toggle icon" role="img">menu</mat-icon>
      </button>
      <!-- TODO: Put logo here (in SVG preferable - convert from AI). -->
      <span attr.aria-label="Company name" title="Software Company" role="text"
        >Software Company</span
      >
      <!--
        The below element is hidden by default, and will be shown only on devices with min-width: 960px.
      -->
      <div fxFlex="row" fxLayoutAlign="end" fxHide fxShow.gt-sm>
        <!-- Grouping element for list of menu items. -->
        <ng-container
          *ngFor="let menuItem of menuItems; let j = index; let lastItem = last"
        >
          <!-- Desktop main menu elements. -->
          <a
            mat-button
            *ngIf="!lastItem"
            attr.aria-label="{{ menuItem.name }}"
            role="link"
            routerLink="{{ menuItem.path }}"
            title="{{ menuItem.name }}"
            >{{ menuItem.name }}
            <mat-icon
              *ngIf="j === 1"
              #menuTrigger="matMenuTrigger"
              [matMenuTriggerFor]="menuDesktop"
              (mouseenter)="menuTrigger.openMenu()"
              role="img"
              >arrow_drop_down
            </mat-icon></a
          >
          <!--
            TODO: Once mouse leaves (focus, not only click) the mat-menu element hide it.
          -->
          <!-- Menu of services. -->
          <mat-menu
            #menuDesktop="matMenu"
            [overlapTrigger]="false"
            (mouseleave)="menuTrigger.closeMenu()"
            role="menu"
          >
            <!-- Lazy loaded menu of services. -->
            <ng-template matMenuContent>
              <!-- Grouping element for list of menu items for services. -->
              <ng-container *ngFor="let serviceItem of servicesItems">
                <!-- Services elements. -->
                <a
                  mat-menu-item
                  attr.aria-label="{{ serviceItem.name }}"
                  role="link"
                  routerLink="{{ serviceItem.path }}"
                  title="{{ serviceItem.name }}"
                  >{{ serviceItem.name }}</a
                ></ng-container
              >
            </ng-template>
          </mat-menu>
        </ng-container>
      </div>
    </mat-toolbar>
    <!-- Mobile header main menu (sidenav). -->
    <mat-sidenav #sidenav fixedInViewport="true" role="sidenav">
      <mat-toolbar role="text">Menu</mat-toolbar>
      <!-- Navbar list. -->
      <mat-nav-list role="navigation">
        <!-- Grouping element for list of menu items. -->
        <ng-container
          *ngFor="let menuItem of menuItems; let i = index; let lastItem = last"
        >
          <hr *ngIf="lastItem" role="separator" />
          <!-- Mobile main menu elements. -->
          <a
            mat-list-item
            *ngIf="i !== 1 && !lastItem; else: servicesTemplate"
            attr.aria-label="{{ menuItem.name }}"
            role="link"
            routerLink="{{ menuItem.path }}"
            title="{{ menuItem.name }}"
          >
            <mat-icon attr.aria-label="{{ menuItem.name }}" role="img">{{
              menuItem.icon
            }}</mat-icon>
            <span attr.aria-label="{{ menuItem.name }}" role="text"
              >&nbsp;{{ menuItem.name }}</span
            >
          </a>
          <!-- Template element for menu of services. -->
          <ng-template #servicesTemplate>
            <!-- Services element in main menu. -->
            <a
              mat-list-item
              *ngIf="!lastItem; else: closeTemplate"
              [matMenuTriggerFor]="menuMobile"
              attr.aria-label="{{ menuItem.name }}"
              role="link"
              routerLink="{{ menuItem.path }}"
              title="{{ menuItem.name }}"
            >
              <mat-icon attr.aria-label="{{ menuItem.name }}" role="img">{{
                menuItem.icon
              }}</mat-icon>
              <span attr.aria-label="{{ menuItem.name }}" role="text"
                >&nbsp;{{ menuItem.name }}</span
              >
              <mat-icon attr.aria-label="{{ menuItem.name }}" role="img"
                >arrow_drop_down</mat-icon
              >
            </a>
            <!-- Template element for close button. -->
            <ng-template #closeTemplate>
              <!-- Close button element in main menu. -->
              <a
                mat-list-item
                (click)="sidenav.close()"
                attr.aria-label="{{ menuItem.name }}"
                role="link"
                routerLink="{{ menuItem.path }}"
                title="{{ menuItem.name }}"
              >
                <mat-icon attr.aria-label="{{ menuItem.name }}" role="img">{{
                  menuItem.icon
                }}</mat-icon>
                <span attr.aria-label="{{ menuItem.name }}" role="text"
                  >&nbsp;{{ menuItem.name }}</span
                >
              </a>
            </ng-template>
          </ng-template>
          <!-- Menu of services. -->
          <mat-menu #menuMobile="matMenu" role="menu">
            <!-- Lazy loaded menu of services. -->
            <ng-template matMenuContent>
              <!-- Grouping element for list of menu items for services. -->
              <ng-container *ngFor="let serviceItem of servicesItems">
                <!-- Services elements. -->
                <a
                  mat-menu-item
                  attr.aria-label="{{ serviceItem.name }}"
                  role="link"
                  routerLink="{{ serviceItem.path }}"
                  title="{{ serviceItem.name }}"
                >
                  <mat-icon
                    attr.aria-label="{{ serviceItem.name }}"
                    role="img"
                    >{{ serviceItem.icon }}</mat-icon
                  >
                  <span attr.aria-label="{{ serviceItem.name }}" role="text">{{
                    serviceItem.name
                  }}</span>
                </a>
              </ng-container>
            </ng-template>
          </mat-menu>
        </ng-container>
      </mat-nav-list>
    </mat-sidenav>
  </mat-sidenav-container>
</header>

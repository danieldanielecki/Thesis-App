<!-- Card container that binds all togather -->
<mat-card
  fxFlex="50"
  fxFlex.md="80"
  fxFlex.lt-md="90"
  fxFlexOffset="25"
  fxFlexOffset.md="10"
  fxFlexOffset.lt-md="5"
  role="region"
>
  <!-- Title of a card. -->
  <mat-card-title
    fxFlexAlign="center"
    aria-label="This is a contact page to contact with us."
    title="Contact"
    >Contact</mat-card-title
  >

  <!-- Actual content starts from here -->
  <mat-card-content>
    <form
      [formGroup]="contactForm"
      (ngSubmit)="onSubmit(contactForm.value)"
      fxLayout="column"
      fxLayoutAlign="space-between stretch"
      fxLayoutGap="20px"
    >
      <mat-form-field>
        <input
          matInput
          formControlName="formControlName"
          required
          aria-label="Here provide your full name."
          placeholder="Your name"
          title="Your name"
          type="text"
        />
        <mat-hint>Write your name.</mat-hint>
        <mat-error *ngIf="!contactForm.get('formControlName')!.valid"
          >This is an <strong>invalid</strong> a full name.
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <input
          matInput
          formControlName="formControlEmail"
          required
          aria-label="Here provide your valid email address."
          placeholder="Your email"
          title="Your email"
          type="email"
        />
        <mat-hint>Provide valid email address.</mat-hint>
        <mat-error *ngIf="!contactForm.get('formControlEmail')!.valid"
          >This is an <strong>invalid</strong> email address.
        </mat-error>
      </mat-form-field>
      <!-- TODO: Fix getting the dial code on user input, issue #42. -->
      <mat-form-field appearance="outline">
        <input
          matInput
          ng2TelInput
          [ng2TelInputOptions]="{
            initialCountry: 'us',
            preferredCountries: [
              'au',
              'ca',
              'de',
              'ie',
              'nl',
              'no',
              'pl',
              'ch',
              'uk',
              'us'
            ]
          }"
          formControlName="formControlPhone"
          (hasError)="hasError($event)"
          aria-label="Here provide your phone number according to your country of origin."
          placeholder="Your phone number"
          title="Your phone number"
          type="tel"
        />
        <mat-icon matSuffix>phone</mat-icon>
        <mat-hint>Your phone number with country prefix.</mat-hint>
        <mat-error *ngIf="!contactForm.get('formControlPhone')!.valid"
          >This is an <strong>invalid</strong> phone number.
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <!--
          TODO: Check why the message doesn't appear instantly, even though validation is correct.
        -->
        <input
          matInput
          [matDatepicker]="deadlineDatepicker"
          [matDatepickerFilter]="filterAvailableDays"
          [max]="maxDate"
          [min]="currentDate"
          formControlName="formControlDeadline"
          aria-label="Click here to choose a deadline for your project."
          placeholder="Project deadline"
          title="Project deadline"
        />
        <mat-hint
          >Specify when at latest you would like to have the project
          done.</mat-hint
        >
        <mat-error *ngIf="!contactForm.get('formControlDeadline')!.valid"
          >This date is an <strong>invalid</strong> project deadline date.
        </mat-error>
        <mat-datepicker-toggle
          matSuffix
          [for]="deadlineDatepicker"
        ></mat-datepicker-toggle>
        <mat-datepicker touchUi="true" #deadlineDatepicker></mat-datepicker>
      </mat-form-field>
      <mat-form-field>
        <textarea
          matInput
          matTextareaAutosize
          matAutosizeMinRows="5"
          matAutosizeMaxRows="20"
          formControlName="formControlDescription"
          required
          aria-label="Here describe what is your project about."
          placeholder="Project description"
          title="Project description"
        ></textarea>
        <mat-hint>Description for your project.</mat-hint>
        <mat-error *ngIf="!contactForm.get('formControlDescription')!.valid"
          >Description of the project is expected to have
          <strong>between 30 and 5000 characters.</strong>
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <!-- TODO: Add front-end validation for the specific files. -->
        <ngx-mat-file-input
          [accept]="[
            '.doc',
            '.docx',
            '.jpg',
            '.jpeg',
            '.pdf',
            '.png',
            '.xls',
            '.xlsx'
          ]"
          formControlName="fileUploader"
          multiple
          aria-label="Here you can optionally add additional files about your project, which can be helpeful for us."
          placeholder="Optionally additional files"
          title="Optionally additional files"
          type="file"
        >
        </ngx-mat-file-input>
        <mat-icon matSuffix>folder</mat-icon>
        <mat-hint
          >Accepted formats: DOC, DOCX, JPG, JPEG, PDF, PNG, XLS and XLSX,
          maximum files upload size: 20 MB.
        </mat-hint>
        <mat-error
          *ngIf="contactForm.get('fileUploader').hasError('maxContentSize')"
        >
          This size is too large,
          <strong
            >maximum acceptable upload is
            {{
              contactForm.get('fileUploader')?.getError('maxContentSize')
                .maxSize | byteFormat
            }}</strong
          >
          (uploaded size:
          {{
            contactForm.get('fileUploader')?.getError('maxContentSize')
              .actualSize | byteFormat
          }}).
        </mat-error>
      </mat-form-field>
      <h4
        fxFlexAlign="center"
        aria-label="Here choose preferred form of contact with you."
        title="Choose preferred form of contact"
      >
        Choose preferred form of contact
      </h4>
      <mat-radio-group
        formControlName="formControlContactPreference"
        fxFlexAlign="center"
        multiple
        aria-label="You can choose between email or phone as a preferred form of contact with you."
      >
        <mat-radio-button
          aria-label="Email is your preferred form of contact."
          title="Email"
          value="Email"
          >Email</mat-radio-button
        >
        <mat-radio-button
          aria-label="Phone is your preferred form of contact."
          title="Phone"
          value="Phone"
          >Phone</mat-radio-button
        >
      </mat-radio-group>
      <h4
        fxFlexAlign="center"
        aria-label="Here you can choose in which services are you interested in."
        title="Select in which services are you interested in"
      >
        Select in which services are you interested in
      </h4>
      <mat-selection-list
        formControlName="formControlService"
        multiple
        aria-label="Here choose in which services are you interested in."
      >
        <ng-container *ngFor="let servicesItem of servicesItems">
          <mat-list-option
            attr.aria-label="Service of {{ servicesItem }}."
            title="{{ servicesItem }}"
            value="{{ servicesItem }}"
            >{{ servicesItem }}</mat-list-option
          >
        </ng-container>
      </mat-selection-list>
      <mat-error
        *ngIf="
          !contactForm.get('formControlService')!.valid &&
          contactForm.get('formControlService')!.touched
        "
        >You have to select <strong>at least 1</strong> service.
      </mat-error>
      <re-captcha
        formControlName="recaptchaCheck"
        fxFlexAlign="center"
        aria-label="This is a security check. In order to send a message to use please follow what is mentioned in the pop up window."
        title="Security check"
      ></re-captcha>
      <mat-slide-toggle
        (change)="handleTerms()"
        formControlName="acceptedTerms"
        fxFlexAlign="center"
        aria-label="You have to accept terms if you want to send a message to us. Please click here in order to accept terms."
        title="Accept terms"
        >Accept terms
      </mat-slide-toggle>
      <button
        mat-raised-button
        color="primary"
        [disabled]="!contactForm.valid || acceptedTerms === false"
        aria-label="Click here to send a message."
        title="Send message"
      >
        Send message
      </button>
    </form>
  </mat-card-content>
</mat-card>
